<!DOCTYPE html>
<html>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
  </style>
</head>
<body>
  <script>
    let mic;
    let casaImg;
    let escala = 1;
    let estaRota = false;
    let fragmentos = [];
    let sonidoRuptura;

    function preload() {
      // Reemplaza con tu imagen de casa (puede ser un SVG o PNG)
      casaImg = loadImage('https://raw.githubusercontent.com/processing/p5.js/main/docs/assets/favicon.ico'); // Ejemplo, usa tu imagen
      sonidoRuptura = loadSound('https://assets.mixkit.co/sfx/preview/mixkit-balloon-pop-with-delay-2350.mp3'); // Reemplaza con tu MP3
    }

    function setup() {
      createCanvas(800, 600);
      // Configuraci칩n del micr칩fono
      mic = new p5.AudioIn();
      mic.start();
      // Fragmentos al reventar
      for (let i = 0; i < 10; i++) {
        fragmentos.push({
          x: random(width),
          y: random(height),
          tam: random(30, 80)
        });
      }
    }

    function draw() {
      background(240);
      
      if (!estaRota) {
        // Inflar con micr칩fono
        let vol = mic.getLevel();
        escala = map(vol, 0, 0.5, 1, 2, true);
        
        // Dibujar casa
        push();
        translate(width/2, height/2);
        scale(escala);
        imageMode(CENTER);
        image(casaImg, 0, 0, 200, 200);
        pop();
        
        // Verificar si revienta
        if (escala >= 1.8) {
          estaRota = true;
          if (sonidoRuptura) sonidoRuptura.play();
        }
      } else {
        // Dibujar fragmentos
        fill(255, 150);
        noStroke();
        for (let f of fragmentos) {
          ellipse(f.x, f.y, f.tam);
        }
      }
    }

    function mousePressed() {
      // Reiniciar al hacer clic si est치 rota
      if (estaRota) {
        estaRota = false;
        escala = 1;
      }
    }
  </script>
</body>
</html>
